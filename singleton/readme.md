
> [极客时间《设计模式》（王争）](http://gk.link/a/10wFB)
> [PHP Code](https://gitee.com/alexwalt/learn-design-pattern-php/tree/master/singleton)

# 前言
开始补全木桶最短的一片了，跟着王争老师学习设计模式，本人的锤子是`PHP`，巧了`PHP7.0`以后是支持继承、接口和抽象类的，应该也算是比较适用来学习设计模式了。在学习过程中，课程中的示例代码都是`Java`的，虽然可以理解和看懂，但是由于语言特性，Java算是编译型语言，`PHP`是解释型语言，使用起来还是有一些区别的，本着学习和思考优先的原则，还是尽力把老师讲的代码翻译成PHP吧，相信23个设计模式走过一遭后，会有一个大的飞跃。
# 定义
单例设计模式（`Singleton Design Pattern`），一个类只允许创建一个对象（或者叫实例），那这个类就是一个单例类，这种设计模式就叫作单例设计模式，简称单例模式。

# 特点
**存储的数据全局可用且唯一**


# 适合场景
单例模式的用处从业务上来理解，有些数据在**系统**中只应该保存一份。
1. 表示全局唯一，某些数据在系统中只能保存一份，比如配置信息类、唯一`ID`发号器
2. 处理资源访问冲突、解决资源竞争，例如写日志功能，如果`new`出多个实例，同时写入一个文件，就可能造成文件中内容的覆盖


# 实现
概括起来，要实现一个单例，我们需要关注的点无外乎下面几个：
- 构造函数需要是 `private` 访问权限的，这样才能避免外部通过 `new` 创建实例
- 成员变量要静态的（`static`），保证全局唯一
- 考虑对象创建时的线程安全问题（`PHP`暂时不用考虑）
- 考虑是否支持延迟加载（`PHP`暂时不用考虑）
- 考虑 `getInstance()` 性能是否高（是否加锁）。（`PHP`暂时不用考虑）
![类图](./20210901.png)